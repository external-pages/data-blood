<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <title>Data Blood</title>
        <link rel="stylesheet" href="css/data-blood.css" />
    </head>
    <body>
        <div class="scene">
            <img class="glow" src="assets/rose.png" />
            <div class="background"><img class="wall" src="assets/10wallsfullnoreflexsorry0001.png"/></div>
            <div class="layers">
                <img class="funghi-table" src="assets/cropped/3fungitable0001.png" />
                <img class="heart-table" src="assets/cropped/8hearttableandtv0001.png" />
                <img class="flower-table" src="assets/cropped/7flowertable0001.png" />
                <img class="ipad-table" src="assets/cropped/9ipadtable0001.png" />
                <video class="tv" src="assets/Datablood-RoomVid.mp4" autoplay loop controls></video>
                <img class="arch-right" src="assets/cropped/4archright0001.png" />
                <img class="arch-left" src="assets/cropped/6archleft0001.png" />
                <img class="plant-table" src="assets/cropped/5planttable0001.png" />
            </div>
        </div>
        <div class="manifesto">
            <div id="container1"></div>
            <div id="container2"></div>
            <div id="container3"></div>
            <p class="manifesto4">We prioritise the primal</p>
            <p class="manifesto5">Recognise the sacred</p>
            <p class="manifesto6">Both goddess and cyborg</p>
            <p class="manifesto7">We heal ourselves</p>
            <p class="manifesto8"
                >Reach back to the soil, resist domination<br />
                We wonâ€™t be sanitised nor silenced.</p
            >
        </div>

        <script src="js/lib/jquery-3.4.1.min.js"></script>
        <script src="js/data-blood.js"></script>

        <script src="js/lib/threejs/build/three.js"></script>
        <script src="js/lib/threejs/TrackballControls.js"></script>
        <script src="js/lib/threejs/OrbitControls.js"></script>
        <script>
            var camera, scene, renderer

            init()
            animate()

            function init() {
                var container = document.getElementById("container1")

                camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000)
                camera.position.set(0, 0, 1000)

                scene = new THREE.Scene()
                // scene.background = new THREE.Color(0xe7ecf2)

                // renderer = new THREE.WebGLRenderer({ antialias: true })
                renderer = new THREE.WebGLRenderer({ alpha: true })
                renderer.setPixelRatio(2)
                renderer.setSize(window.innerWidth, window.innerHeight)
                renderer.setClearColor(0x000000, 0)

                container.appendChild(renderer.domElement)

                var loader = new THREE.FontLoader()
                loader.load("/assets/fonts/Accedent_Regular.json", function(font) {
                    var xMid, text

                    var color = 0x000000
                    var matDark = new THREE.LineBasicMaterial({
                        color: color,
                        side: THREE.DoubleSide
                    })

                    var message = "The data in our blood is calling"
                    var shapes = font.generateShapes(message, 20)
                    var geometry = new THREE.ShapeBufferGeometry(shapes)
                    geometry.computeBoundingBox()
                    xMid = -0.514 * (geometry.boundingBox.max.x - geometry.boundingBox.min.x)
                    geometry.translate(xMid, 0, 0)

                    // make shape ( N.B. edge view not visible )

                    text = new THREE.Mesh(geometry, matDark)
                    scene.add(text)
                    text.position.set(0, -10, 0)
                }) //end load function

                // controls = new THREE.TrackballControls(camera, renderer.domElement)
                // controls.rotateSpeed = 4
                controls = new THREE.OrbitControls(camera, renderer.domElement)
                controls.autoRotate = true
                controls.autoRotateSpeed = -2

                window.addEventListener("resize", onWindowResize, false)
            } // end init

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight
                camera.updateProjectionMatrix()
                renderer.setSize(window.innerWidth, window.innerHeight)
            }

            function animate() {
                requestAnimationFrame(animate)
                controls.update()
                renderer.render(scene, camera)
            }
        </script>
    </body>
</html>
