<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Data_Blood III</title>
        <meta name="description" content="A cyberfeminist installation by Data_Blood duo Alice Morey & Emily Mulenga" />
        <meta content="width=device-width, initial-scale=1" name="viewport" />

        <link href="assets/favicon/favicon.ico" rel="shortcut icon" type="image/x-icon" />

        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://externalpages.org/data_blood" />
        <meta property="og:title" content="Data_Blood III" />
        <meta property="og:description" content="by Data_Blood duo Alice Morey & Emily Mulenga" />
        <meta property="og:image" content="assets/meta.png" />

        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content="https://externalpages.org/data_blood" />
        <meta property="twitter:title" content="Data_Blood III" />
        <meta property="twitter:description" content="by Data_Blood duo Alice Morey & Emily Mulenga" />
        <meta property="twitter:image" content="assets/meta.png" />

        <link rel="stylesheet" href="css/data-blood.css" />
    </head>
    <body>
        <div class="notice"><p>Please view on desktop browsers.</p></div>
        <!-- <iframe src="https://s3.amazonaws.com/external-pages/data-blood/datablood.mp3" allow="autoplay" style="display:none" id="iframeAudio"> </iframe> -->
        <audio autoplay loop id="playAudio">
            <source src="https://s3.amazonaws.com/external-pages/data-blood/datablood.mp3" />
        </audio>

        <div class="scene">
            <img class="glow" src="assets/rose.png" />
            <div class="background" id="background"><img class="wall" src="assets/10wallsfullnoreflexsorry0001.png"/></div>
            <div class="layers">
                <div class="light">
                    <div class="green color"></div>
                    <img class="funghi-table image" id="funghi-table" src="assets/cropped/3fungitable0001.png" />
                </div>
                <div class="light">
                    <div class="red color"></div>
                    <img class="heart-table image" id="heart-table" src="assets/cropped/8hearttableandtv0001.png" />
                </div>
                <div class="light">
                    <div id="tv"
                        ><video
                            class="tv"
                            id="tv-video"
                            src="https://s3.amazonaws.com/external-pages/data-blood/Datablood-RoomVid.mp4"
                            autoplay
                            loop
                            muted
                        ></video
                    ></div>
                    <div class="light">
                        <div class="blue color"></div>
                        <img class="flower-table image" id="flower-table" src="assets/cropped/7flowertable0001.png" />
                    </div>
                    <div class="light">
                        <div class="purple color"></div>
                        <img class="ipad-table image" id="ipad-table" src="assets/cropped/9ipadtable0001.png" />
                    </div>
                </div>
                <div class="light">
                    <div class="grey color"></div>
                    <img class="arch-right image" id="arch-right" src="assets/cropped/4archright0001.png" />
                </div>
                <div class="light">
                    <div class="orange color"></div>
                    <img class="arch-left image" id="arch-left" src="assets/cropped/6archleft0001.png" />
                </div>
                <div class="light">
                    <div class="darkblue color"></div>
                    <img class="plant-table image" id="plant-table" src="assets/cropped/gif/99animplantAB0001.png" />
                    <img class="plant-on-table image" id="plant-on-table" src="assets/cropped/gif/flowergif.gif" />
                </div>
            </div>
        </div>
        <!-- <div class="manifesto">  -->
        <div id="container"> </div>
        <!-- </div> -->

        <script src="js/lib/jquery-3.4.1.min.js"></script>
        <script src="js/data-blood.js"></script>

        <script src="js/lib/threejs/build/three.js"></script>
        <script src="js/lib/threejs/TrackballControls.js"></script>
        <script src="js/lib/threejs/OrbitControls.js"></script>
        <script>
            document.addEventListener("click", musicPlay)
            function musicPlay() {
                document.getElementById("playAudio").play()
                document.removeEventListener("click", musicPlay)
            }

            var camera, scene, renderer

            init()
            animate()

            function init() {
                var container = document.getElementById("container")

                camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000)
                camera.position.set(0, 0, 1000)

                scene = new THREE.Scene()
                renderer = new THREE.WebGLRenderer({ alpha: true })
                renderer.setPixelRatio(2)
                renderer.setSize(window.innerWidth, window.innerHeight)
                renderer.setClearColor(0x000000, 0)

                container.appendChild(renderer.domElement)

                var loader = new THREE.FontLoader()
                loader.load("/assets/fonts/Accedent_Regular.json", function(font) {
                    var xMid, text, text3, text4, text5, text6, text7, text8, text9, text10

                    var color = 0x000000
                    var matDark = new THREE.LineBasicMaterial({
                        color: color,
                        side: THREE.DoubleSide
                    })

                    var message1 = `The data in our blood is calling

One foot in cyberspace
One foot in the wild`
                    var shapes1 = font.generateShapes(message1, 30)
                    var geometry1 = new THREE.ShapeBufferGeometry(shapes1)
                    geometry1.computeBoundingBox()
                    xMid = -0.514 * (geometry1.boundingBox.max.x - geometry1.boundingBox.min.x)
                    geometry1.translate(xMid, 0, 0)
                    text1 = new THREE.Mesh(geometry1, matDark)
                    scene.add(text1)
                    text1.position.set(0, 260, 0)
                    text1.visible = false
                    document.getElementById("funghi-table").addEventListener("click", function() {
                        text1.visible = !text1.visible
                    })

                    var message2 = `We prioritise the primal
Recognise the sacred`
                    var shapes2 = font.generateShapes(message2, 30)
                    var geometry2 = new THREE.ShapeBufferGeometry(shapes2)
                    geometry2.computeBoundingBox()
                    xMid = -0.514 * (geometry2.boundingBox.max.x - geometry2.boundingBox.min.x)
                    geometry2.translate(xMid, 0, 0)
                    text2 = new THREE.Mesh(geometry2, matDark)
                    scene.add(text2)
                    text2.position.set(0, 80, 0)
                    text2.visible = false
                    document.getElementById("heart-table").addEventListener("click", function() {
                        text2.visible = !text2.visible
                    })

                    var message3 = `Both goddess and cyborg
We heal ourselves

Reach back to the soil
resist domination`
                    var shapes3 = font.generateShapes(message3, 30)
                    var geometry3 = new THREE.ShapeBufferGeometry(shapes3)
                    geometry3.computeBoundingBox()
                    xMid = -0.514 * (geometry3.boundingBox.max.x - geometry3.boundingBox.min.x)
                    geometry3.translate(xMid, 0, 0)
                    text3 = new THREE.Mesh(geometry3, matDark)
                    scene.add(text3)
                    text3.position.set(0, -40, 0)
                    text3.visible = false
                    document.getElementById("ipad-table").addEventListener("click", function() {
                        text3.visible = !text3.visible
                    })

                    var message4 = `We will not be sanitised
nor silenced`
                    var shapes4 = font.generateShapes(message4, 30)
                    var geometry4 = new THREE.ShapeBufferGeometry(shapes4)
                    geometry4.computeBoundingBox()
                    xMid = -0.514 * (geometry4.boundingBox.max.x - geometry4.boundingBox.min.x)
                    geometry4.translate(xMid, 0, 0)
                    text4 = new THREE.Mesh(geometry4, matDark)
                    scene.add(text4)
                    text4.position.set(0, -260, 0)
                    text4.visible = false
                    document.getElementById("flower-table").addEventListener("click", function() {
                        text4.visible = !text4.visible
                    })
                }) //end load function

                // controls = new THREE.TrackballControls(camera, renderer.domElement)
                // controls.rotateSpeed = 4
                controls = new THREE.OrbitControls(camera, renderer.domElement)
                controls.autoRotate = true
                controls.autoRotateSpeed = 1.6

                window.addEventListener("resize", onWindowResize, false)
            } // end init

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight
                camera.updateProjectionMatrix()
                renderer.setSize(window.innerWidth, window.innerHeight)
            }

            function animate() {
                requestAnimationFrame(animate)
                controls.update()
                renderer.render(scene, camera)
            }
        </script>
    </body>
</html>
